# Copyright (c) 2024 The Brave Authors. All rights reserved.
# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at https://mozilla.org/MPL/2.0/.

import("//brave/ios/web_view/web_view_sources.gni")

config("config") {
  # TODO(crbug.com/40120082): This will only guarantee ios/web_view source files
  # are extension safe. We also need to pass this flag to all all dependencies.
  common_flags = [ "-fapplication-extension" ]
  cflags_objc = common_flags
  cflags_objcc = common_flags
  defines = [ "CWV_IMPLEMENTATION" ]
  frameworks = [
    "CoreGraphics.framework",
    "Foundation.framework",
    "MobileCoreServices.framework",
    "UIKit.framework",
  ]
}

source_set("web_view") {
  sources = ios_web_view_public_headers
  sources += [
    "//ios/web_view/internal/app/application_context.h",
    "//ios/web_view/internal/app/application_context.mm",
    "//ios/web_view/internal/autofill/cwv_autofill_client_ios_bridge.h",
    "//ios/web_view/internal/autofill/cwv_autofill_controller.mm",
    "//ios/web_view/internal/autofill/cwv_autofill_controller_internal.h",
    "//ios/web_view/internal/autofill/cwv_autofill_data_manager.mm",
    "//ios/web_view/internal/autofill/cwv_autofill_data_manager_internal.h",
    "//ios/web_view/internal/autofill/cwv_autofill_form.mm",
    "//ios/web_view/internal/autofill/cwv_autofill_form_internal.h",
    "//ios/web_view/internal/autofill/cwv_autofill_profile.mm",
    "//ios/web_view/internal/autofill/cwv_autofill_profile_internal.h",
    "//ios/web_view/internal/autofill/cwv_autofill_suggestion.mm",
    "//ios/web_view/internal/autofill/cwv_autofill_suggestion_internal.h",
    "//ios/web_view/internal/autofill/cwv_credit_card.mm",
    "//ios/web_view/internal/autofill/cwv_credit_card_internal.h",
    "//ios/web_view/internal/autofill/cwv_credit_card_saver.mm",
    "//ios/web_view/internal/autofill/cwv_credit_card_saver_internal.h",
    "//ios/web_view/internal/autofill/cwv_credit_card_verifier.mm",
    "//ios/web_view/internal/autofill/cwv_credit_card_verifier_internal.h",
    "//ios/web_view/internal/autofill/ios_web_view_payments_autofill_client.h",
    "//ios/web_view/internal/autofill/ios_web_view_payments_autofill_client.mm",
    "//ios/web_view/internal/autofill/web_view_autocomplete_history_manager_factory.h",
    "//ios/web_view/internal/autofill/web_view_autofill_client_ios.h",
    "//ios/web_view/internal/autofill/web_view_autofill_client_ios.mm",
    "//ios/web_view/internal/autofill/web_view_autofill_log_router_factory.h",
    "//ios/web_view/internal/autofill/web_view_personal_data_manager_factory.h",
    "//ios/web_view/internal/autofill/web_view_strike_database_factory.h",
    "//ios/web_view/internal/cwv_back_forward_list.mm",
    "//ios/web_view/internal/cwv_back_forward_list_internal.h",
    "//ios/web_view/internal/cwv_back_forward_list_item.mm",
    "//ios/web_view/internal/cwv_back_forward_list_item_internal.h",
    "//ios/web_view/internal/cwv_download_task.mm",
    "//ios/web_view/internal/cwv_download_task_internal.h",
    "//ios/web_view/internal/cwv_favicon.mm",
    "//ios/web_view/internal/cwv_favicon_internal.h",
    "//ios/web_view/internal/cwv_find_in_page_controller.mm",
    "//ios/web_view/internal/cwv_find_in_page_controller_internal.h",
    "//ios/web_view/internal/cwv_html_element.mm",
    "//ios/web_view/internal/cwv_html_element_internal.h",
    "//ios/web_view/internal/cwv_lookalike_url_handler.mm",
    "//ios/web_view/internal/cwv_lookalike_url_handler_internal.h",
    "//ios/web_view/internal/cwv_navigation_action.mm",
    "//ios/web_view/internal/cwv_navigation_action_internal.h",
    "//ios/web_view/internal/cwv_navigation_response.mm",
    "//ios/web_view/internal/cwv_navigation_response_internal.h",
    "//ios/web_view/internal/cwv_navigation_type.mm",
    "//ios/web_view/internal/cwv_navigation_type_internal.h",
    "//ios/web_view/internal/cwv_preferences.mm",
    "//ios/web_view/internal/cwv_preferences_internal.h",
    "//ios/web_view/internal/cwv_preview_element_info.mm",
    "//ios/web_view/internal/cwv_preview_element_info_internal.h",
    "//ios/web_view/internal/cwv_ssl_error_handler.mm",
    "//ios/web_view/internal/cwv_ssl_error_handler_internal.h",
    "//ios/web_view/internal/cwv_ssl_status.mm",
    "//ios/web_view/internal/cwv_ssl_status_internal.h",
    "//ios/web_view/internal/cwv_ssl_util.h",
    "//ios/web_view/internal/cwv_ssl_util.mm",
    "//ios/web_view/internal/cwv_user_content_controller.mm",
    "//ios/web_view/internal/cwv_user_content_controller_internal.h",
    "//ios/web_view/internal/cwv_user_script.mm",
    "//ios/web_view/internal/cwv_web_view_internal.h",
    "//ios/web_view/internal/cwv_x509_certificate.mm",
    "//ios/web_view/internal/cwv_x509_certificate_internal.h",
    "//ios/web_view/internal/js_messaging/web_view_scripts_java_script_feature.h",
    "//ios/web_view/internal/js_messaging/web_view_scripts_java_script_feature.mm",
    "//ios/web_view/internal/language/web_view_accept_languages_service_factory.h",
    "//ios/web_view/internal/language/web_view_language_model_manager_factory.h",
    "//ios/web_view/internal/language/web_view_url_language_histogram_factory.h",
    "//ios/web_view/internal/passwords/cwv_credential_provider_extension_utils.mm",
    "//ios/web_view/internal/passwords/cwv_leak_check_credential.mm",
    "//ios/web_view/internal/passwords/cwv_leak_check_credential_internal.h",
    "//ios/web_view/internal/passwords/cwv_leak_check_service.mm",
    "//ios/web_view/internal/passwords/cwv_leak_check_service_internal.h",
    "//ios/web_view/internal/passwords/cwv_password.mm",
    "//ios/web_view/internal/passwords/cwv_password_internal.h",
    "//ios/web_view/internal/passwords/cwv_reuse_check_service.mm",
    "//ios/web_view/internal/passwords/cwv_reuse_check_service_internal.h",
    "//ios/web_view/internal/passwords/cwv_weak_check_utils.mm",
    "//ios/web_view/internal/passwords/cwv_weak_check_utils_internal.h",
    "//ios/web_view/internal/passwords/web_view_account_password_store_factory.h",
    "//ios/web_view/internal/passwords/web_view_bulk_leak_check_service_factory.h",
    "//ios/web_view/internal/passwords/web_view_password_feature_manager.h",
    "//ios/web_view/internal/passwords/web_view_password_feature_manager.mm",
    "//ios/web_view/internal/passwords/web_view_password_manager_client.h",
    "//ios/web_view/internal/passwords/web_view_password_manager_client.mm",
    "//ios/web_view/internal/passwords/web_view_password_manager_log_router_factory.h",
    "//ios/web_view/internal/passwords/web_view_password_requirements_service_factory.h",
    "//ios/web_view/internal/passwords/web_view_password_reuse_manager_factory.h",
    "//ios/web_view/internal/passwords/web_view_profile_password_store_factory.h",
    "//ios/web_view/internal/safe_browsing/cwv_unsafe_url_handler.mm",
    "//ios/web_view/internal/safe_browsing/cwv_unsafe_url_handler_internal.h",
    "//ios/web_view/internal/safe_browsing/web_view_safe_browsing_client.h",
    "//ios/web_view/internal/safe_browsing/web_view_safe_browsing_client.mm",
    "//ios/web_view/internal/safe_browsing/web_view_safe_browsing_client_factory.h",
    "//ios/web_view/internal/signin/account_capabilities_fetcher_factory_ios_web_view.h",
    "//ios/web_view/internal/signin/account_capabilities_fetcher_factory_ios_web_view.mm",
    "//ios/web_view/internal/signin/account_capabilities_fetcher_ios_web_view.h",
    "//ios/web_view/internal/signin/account_capabilities_fetcher_ios_web_view.mm",
    "//ios/web_view/internal/signin/cwv_identity.mm",
    "//ios/web_view/internal/signin/ios_web_view_signin_client.h",
    "//ios/web_view/internal/signin/ios_web_view_signin_client.mm",
    "//ios/web_view/internal/signin/web_view_device_accounts_provider_impl.h",
    "//ios/web_view/internal/signin/web_view_device_accounts_provider_impl.mm",
    "//ios/web_view/internal/signin/web_view_gaia_auth_fetcher.h",
    "//ios/web_view/internal/signin/web_view_gaia_auth_fetcher.mm",
    "//ios/web_view/internal/signin/web_view_identity_manager_factory.h",
    "//ios/web_view/internal/signin/web_view_signin_client_factory.h",
    "//ios/web_view/internal/sync/cwv_sync_controller.mm",
    "//ios/web_view/internal/sync/cwv_sync_controller_internal.h",
    "//ios/web_view/internal/sync/cwv_trusted_vault_observer.mm",
    "//ios/web_view/internal/sync/cwv_trusted_vault_observer_internal.h",
    "//ios/web_view/internal/sync/cwv_trusted_vault_utils.mm",
    "//ios/web_view/internal/sync/web_view_device_info_sync_service_factory.h",
    "//ios/web_view/internal/sync/web_view_gcm_profile_service_factory.h",
    "//ios/web_view/internal/sync/web_view_instance_id_profile_service_factory.h",
    "//ios/web_view/internal/sync/web_view_model_type_store_service_factory.h",
    "//ios/web_view/internal/sync/web_view_profile_invalidation_provider_factory.h",
    "//ios/web_view/internal/sync/web_view_sync_client.h",
    "//ios/web_view/internal/sync/web_view_sync_client.mm",
    "//ios/web_view/internal/sync/web_view_sync_invalidations_service_factory.h",
    "//ios/web_view/internal/sync/web_view_sync_service_factory.h",
    "//ios/web_view/internal/sync/web_view_trusted_vault_client.h",
    "//ios/web_view/internal/sync/web_view_trusted_vault_client.mm",
    "//ios/web_view/internal/translate/cwv_translation_controller.mm",
    "//ios/web_view/internal/translate/cwv_translation_controller_internal.h",
    "//ios/web_view/internal/translate/cwv_translation_language.mm",
    "//ios/web_view/internal/translate/cwv_translation_language_internal.h",
    "//ios/web_view/internal/translate/cwv_translation_policy.mm",
    "//ios/web_view/internal/translate/web_view_translate_client.h",
    "//ios/web_view/internal/translate/web_view_translate_client.mm",
    "//ios/web_view/internal/translate/web_view_translate_ranker_factory.h",
    "//ios/web_view/internal/translate/web_view_translate_service.h",
    "//ios/web_view/internal/translate/web_view_translate_service.mm",
    "//ios/web_view/internal/utils/nsobject_description_utils.h",
    "//ios/web_view/internal/utils/nsobject_description_utils.mm",
    "//ios/web_view/internal/web_view_browser_state.h",
    "//ios/web_view/internal/web_view_browser_state.mm",
    "//ios/web_view/internal/web_view_download_manager.h",
    "//ios/web_view/internal/web_view_download_manager.mm",
    "//ios/web_view/internal/web_view_global_state_util_stub.mm",
    "//ios/web_view/internal/web_view_java_script_dialog_presenter.h",
    "//ios/web_view/internal/web_view_java_script_dialog_presenter.mm",
    "//ios/web_view/internal/web_view_message_handler_java_script_feature.h",
    "//ios/web_view/internal/web_view_message_handler_java_script_feature.mm",
    "//ios/web_view/internal/web_view_web_state_policy_decider.h",
    "//ios/web_view/internal/web_view_web_state_policy_decider.mm",
    "//ios/web_view/internal/webdata_services/web_view_web_data_service_wrapper_factory.h",
    "//ios/web_view/internal/cwv_web_view.mm",
    "//ios/web_view/internal/cwv_web_view_configuration.mm",
    "//ios/web_view/internal/cwv_web_view_configuration_internal.h",
  ]
  public_deps = [
    "//base",
    "//components/autofill/core/browser",
    "//components/autofill/core/common",
    "//components/autofill/ios/browser",
    "//components/autofill/ios/browser:util",
    "//components/autofill/ios/form_util",
    "//components/autofill/ios/form_util:form_handler_feature",
    "//components/gcm_driver",
    "//components/history/core/common",
    "//components/image_fetcher/ios",
    "//components/infobars/core",
    "//components/invalidation/impl",
    "//components/keyed_service/core",
    "//components/keyed_service/ios",
    "//components/leveldb_proto",
    "//components/lookalikes/core",
    "//components/os_crypt/async/browser",
    "//components/password_manager/core/browser",
    "//components/password_manager/core/browser/affiliation:affiliation_fetching",
    "//components/password_manager/core/browser/features:password_features",
    "//components/password_manager/core/browser/generation:core",
    "//components/password_manager/core/browser/leak_detection:leak_detection",
    "//components/password_manager/core/browser/sharing",
    "//components/password_manager/core/common",
    "//components/password_manager/ios",
    "//components/plus_addresses/settings",
    "//components/plus_addresses/webdata",
    "//components/pref_registry",
    "//components/prefs",
    "//components/profile_metrics",
    "//components/proxy_config",
    "//components/safe_browsing/core/common:safe_browsing_prefs",
    "//components/safe_browsing/ios/browser:allow_list",
    "//components/security_interstitials/core:unsafe_resource",
    "//components/security_state/ios",
    "//components/services/patch:in_process",
    "//components/services/unzip:in_process",
    "//components/sessions:session_id",
    "//components/ssl_errors",
    "//components/strings",
    "//components/translate/core/browser",
    "//components/translate/core/common",
    "//components/translate/ios/browser",
    "//components/trusted_vault",
    "//components/unified_consent",
    "//components/update_client",
    "//components/update_client:common_impl",
    "//components/url_formatter",
    "//components/variations",
    "//components/variations/net",
    "//components/version_info",
    "//components/version_info:version_string",
    "//components/web_resource",
    "//components/webdata_services",
    "//ios/chrome/browser/autofill/model",
    "//ios/chrome/browser/gcm/model",
    "//ios/chrome/browser/invalidation/model",
    "//ios/chrome/browser/language/model",
    "//ios/chrome/browser/passwords/model",
    "//ios/chrome/browser/signin/model",
    "//ios/chrome/browser/safe_browsing/model",
    "//ios/chrome/browser/sync/model",
    "//ios/chrome/browser/tabs/model/",
    "//ios/chrome/browser/translate/model",
    "//ios/chrome/browser/webdata_services/model",
    "//ios/components/credential_provider_extension:password_spec_fetcher",
    "//ios/components/credential_provider_extension:password_util",
    "//ios/components/io_thread",
    "//ios/components/security_interstitials",
    "//ios/components/security_interstitials/https_only_mode:feature",
    "//ios/components/security_interstitials/lookalikes",
    "//ios/components/webui:provider",
    "//ios/components/webui:url_constants",
    "//ios/components/webui/sync_internals",
    "//ios/net",
    "//ios/third_party/webkit",
    "//ios/web/common",
    "//ios/web/common:user_agent",
    "//ios/web/navigation:wk_navigation_util",
    "//ios/web/public",
    "//ios/web/public/browsing_data",
    "//ios/web/public/deprecated",
    "//ios/web/public/download",
    "//ios/web/public/find_in_page",
    "//ios/web/public/init",
    "//ios/web/public/js_messaging",
    "//ios/web/public/security",
    "//ios/web/public/session:session",
    "//ios/web/public/session/proto",
    "//ios/web/public/web_view_only",
    "//ios/web/public/webui",
    "//ios/web/web_state/ui:wk_web_view_configuration_provider_header",
    "//ios/web/webui",
    "//ios/web_view/internal/js_messaging:cwv_messaging_js",
    "//net",
    "//net:extras",
    "//services/metrics/public/cpp:metrics_cpp",
    "//services/network:network_service",
    "//ui/base",
    "//ui/display",
    "//url",
  ]
  configs += [ ":config" ]
}
